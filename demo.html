<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <script src="static/verovio-toolkit.js"></script>
    <script src="static/main.js"></script>
    <title>IIIF AV Player</title>
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-dark mb-5 pl-4 py-3">
  <a class="navbar-brand text-light">IIIF AV Player</a>
  <form class="form-inline">
    <input class="form-control mr-sm-2" type="search" placeholder="Search" id="urlBox">
    <button class="btn btn-outline-light my-2 my-sm-0 text-light" id="getURL" type="button">Get Manifest</button>
  </form>
</nav>

<div class="jumbotron mx-3">
  <h1 class="display-4">Welcome!</h1>
  <p class="lead">Select between the V3 or V2 sample manifests below, and enter them in the search bar.</p>
  <p>Triple click on a link to quickly highlight it.</p>
  <hr class="my-4">
  <div class="row">
        <div class="col-md-1 text-right">
            <h4 class="display-4">âˆž</h4>
            Image:<br>
            Video:<br>
            Video:<br>
            Audio:
        </div>
        <div class="col-md-5 border-right text-left">
            <h4 class="display-4">V3</h4>
            https://d.lib.ncsu.edu/collections/catalog/nubian-message-2003-04-01/manifest?v3=true<br>
            https://mallorn.dlib.indiana.edu/lunchroom_manners.manifest.json<br>
            https://scrc.lib.ncsu.edu/sal_staging/catalog/ua024-002-bx0149-066-001/manifest<br>
            https://scrc.lib.ncsu.edu/sal_staging/catalog/1959fcsChoral/manifest
        </div>
        <div class="col-md-6 border-left text-right">
            <h4 class="display-4">V2</h4>
            https://d.lib.ncsu.edu/collections/catalog/nubian-message-2003-04-01/manifest<br>
            https://iiif.bodleian.ox.ac.uk/iiif/manifest/caeb212c-a639-41da-a42a-60f6b05a0d0b.json<br>
            https://iiif.bodleian.ox.ac.uk/iiif/manifest/bea56620-793f-4dee-875d-ff051563292a.json
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-6 border-right text-center" id="main">
            <h4 class="display-4" id="title">Manifest</h4>
        </div>
        <div class="col-md-6 border-left text-center" id="score">
            <h4 class="display-4"></h4>
        </div>
    </div>
</div>

<script>
    $('#getURL').click(function () {
        let url = $('#urlBox').val();
        let manifestObject = new ManifestObject(url); 
        manifestObject.fetchManifest(function() {
            // callback once manifest is fetched
            let title = manifestObject.manifest.item_title;
            if (typeof title !== 'string')  
            {
                title = title.en[0];
            }
            console.log(title);
            $('#title').html(title);
        });
    });

    var toolkit = new verovio.toolkit();
    $.ajax({
        url: "static/mei/demo.mei", 
        dataType: "text", 
        success: function(data) {
            var svg = toolkit.renderData(data, {});
            $("#score").html(svg);
            $('svg').width("100%");
            $('svg').height("100%");
        }
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
</body>
</html>
